# Bundle_Set_Images_Creator.py
import streamlit as st
from app import check_auth  # Import the auth system from main app

# Page Configuration
st.set_page_config(
    page_title="Bundle Images Creator",
    page_icon="üì¶",
    layout="centered"
)

# Check authentication (will redirect to login if not authenticated)
check_auth()  # This maintains the session - no repeated logins

# --- MAIN CONTENT ---
st.title("üì¶ Bundle & Set Images Creator")
st.markdown("---")

# Back to Hub button at top
st.markdown('<a href="/" class="app-button-link" style="text-decoration: none; margin-bottom: 2rem;">‚Üê Back to PDM Hub</a>', 
            unsafe_allow_html=True)

# Your content here
st.header("Image Processing Tools")
with st.expander("‚öôÔ∏è Settings"):
    col1, col2 = st.columns(2)
    with col1:
        image_source = st.selectbox("Image Source", ["Repository", "Local Upload"])
    with col2:
        output_format = st.selectbox("Output Format", ["JPEG", "PNG"])

st.divider()

# Main workspace
uploaded_files = st.file_uploader("Upload product images", 
                                 type=["jpg", "png", "jpeg"],
                                 accept_multiple_files=True)

if uploaded_files:
    st.success(f"{len(uploaded_files)} files ready for processing")
    if st.button("‚ú® Process Images", type="primary"):
        with st.spinner("Processing images..."):
            # Simulate processing
            import time
            time.sleep(2)
            st.toast("Processing complete!", icon="‚úÖ")
            st.success("Images processed successfully!")
            
            # Download button
            st.download_button("üì• Download Processed Images",
                             data="Simulated ZIP file content",
                             file_name="processed_images.zip",
                             mime="application/zip")

# Consistent styling with main app
st.markdown("""
    <style>
    .app-button-link {
        background-color: #e0f2fe !important;
        color: #0369a1 !important;
        border: 1px solid #bae6fd !important;
        padding: 0.5rem 1rem !important;
        border-radius: 0.5rem !important;
        display: inline-block !important;
        text-align: center !important;
        margin: 0.5rem 0 !important;
    }
    .app-button-link:hover {
        background-color: #bae6fd !important;
    }
    </style>
""", unsafe_allow_html=True)

st.markdown("---")
st.caption("PDM Utility Hub v1.0 | Bundle Images Creator")
